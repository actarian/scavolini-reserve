<section class="section section-closures">
	<div class="container">
		<form name="view.form" role="form" novalidate autocomplete="off" ng-submit="view.form.$valid && onSubmit()" ng-keyup="$event.keyCode == 13 && view.form.$valid && onSubmit()">
			<!-- <input type="hidden" name="time" ng-model="state.dirty" required /> -->
			<div class="form-headline">
				<div class="h1">Aggiungi le tue chiusure extra-ordinarie</div>
			</div>
			<div class="form-action form-action-inline">
				<div class="form-group form-group-select" style="flex: 0 0 9%;">
					<label>Anno <sup class="required">*</sup></label>
					<select name="year" ng-model="model.year" ng-options="item.name disable when item.disabled for item in source.years track by item.id" class="form-control" required>
						<option value="" disabled selected hidden>anno</option>
					</select>
				</div>
				<div class="form-group form-group-select" style="flex: 0 0 13%;">
					<label>Mese <sup class="required">*</sup></label>
					<select name="month" ng-model="model.month" ng-options="item.name disable when item.disabled for item in source.months track by item.id" class="form-control" required>
						<option value="" disabled selected hidden>mese</option>
					</select>
				</div>
				<div class="form-group form-group-select" style="flex: 0 0 9%;">
					<label>Giorno <sup class="required">*</sup></label>
					<select name="day" ng-model="model.day" ng-options="item.name disable when item.disabled for item in source.days track by item.id" class="form-control" required>
						<option value="" disabled selected hidden>giorno</option>
					</select>
				</div>
				<div class="form-group form-group-select" style="flex: 0 0 15%;">
					<label>Fascia oraria <sup class="required">*</sup></label>
					<select name="day" ng-model="model.daytime" ng-options="item.name disable when item.disabled for item in source.daytimes track by item.id" class="form-control" required>
						<option value="" disabled selected hidden>orario</option>
					</select>
				</div>
				<div class="form-group" style="flex: 0 0 13%;">
					<label>Commento opzionale</label>
					<input placeholder="il tuo commento" name="description" ng-model="model.description" type="text" class="form-control" />
				</div>
				<button class="btn btn-primary animated infinite" style="flex: 0 0 15%;" type="submit" ng-class="state.classes({
					busy: 'bounce', error: 'shake', success: 'pulse'
				})" ng-disabled="view.form.$invalid || state.isBusy || !view.form.$dirty"><span>Aggiungi</span></button>
			</div>
			<div ng-include src="'partials/closures'"></div>
		</form>
	</div>
</section>

<!-- OPTIONS -->
<script type="text/ng-template" id="partials/closures">
	<div class="closures">
		<div class="closure-row">
			<div class="cell">
				<div class="name">Chiusure extra-ordinarie aggiunte</div>
			</div>
		</div>
		<div class="closure-row" ng-repeat="item in store.extraClosures track by $index">
			<div class="cell">
				<div ng-bind="item.date | date : 'd MMMM yyyy' | capitalize"></div>
			</div>
			<div class="cell">
				<div ng-bind="getDaytimeById(item.daytime).name"></div>
			</div>
			<div class="cell">
				<div class="description" ng-bind="item.description"></div>
			</div>
			<div class="cell">
				<button class="btn btn-delete" type="button" ng-click="onDeleteItemAtIndex(item, $index)"><i class="icon-trash"></i> <span>Rimuovi</span></button>
			</div>
		</div>
	</div>
</script>

<!--
<json-formatter json="model"></json-formatter>
-->
