{"version":3,"sources":["docs/js/app.js"],"names":["angular","module","service","Http","Bearer","api","store","getById","storeId","get","reserve","data","days","from","to","navs","main","docs","id","path","split","join","maps","markers","Object","assign","this","config","$locationProvider","$routeProvider","$modalProvider","when","templateUrl","controller","resolve","$route","Api","current","params","booking","BookingService","currentOrGoTo","otherwise","title","customClass","run","$rootScope","$modal","Router","Trust","modals","addModal","router","trust","accessToken","console","log","app","DefaultBookingService","categories","products","daytimes","model","category","date","daytime","time","factory","$promise","$location","DateTime","storage","environment","options","active","emptyDaytimes","getEmptyDaytimes","statics","new","promise","then","error","reject","exist","$$lastRequestedPath","update","set","publics","getProductsByCategory","filter","x","sort","a","b","astr","name","toUpperCase","bstr","getTimesByDaytime","times","map","i","getDaysByRange","getDaysPoolByRange","forEach","day","Date","setDate","getDate","pool","key","dateToKey","getProductNames","prototype","$scope","State","state","modal","onSubmit","busy","setTimeout","success","onCancel","ready","View","Range","items","onSelect","item","find","onSelectCategory","$root","onSelectProduct","user","onCancelReservation","onEditUserData","onBack","plannerOptions","onWeekDidChange","week","view","each","poolDay","closingDay","onDayDidSelect","month","keys","onWeekDidSelect","directive","$templateCache","$parse","$q","$timeout","$filter","Hash","PlannerFactory","priority","restrict","element","attributes","url","template","put","scope","link","transclude","planner","Month","Week","Day","sources","doNavWeek","dir","setWeek","onWeekSelect","onDaySelect","selected","isCurrent","getDayClasses","classes","extend","today","$today","workable","holiday","vacation","working","available","full","status-green","green","status-orange","orange","hasWeeksBefore","isOutside","getWeekByDate","d","getDay","dirty","past","weekend","wasVacation","wasWorkable","input","charAt","substr","toLowerCase","Calendar","weeks","clearMonth","hours","tasks","getKey","getWeeks","num","calendar","removeAll","months","setFullYear","getFullYear","setMonth","getMonth","setHours","setMinutes","setSeconds","getWeek","yyyy","MM","diff","weekDate","isoWeek","dKey","wKey","mKey","Array","fill","o","dayDate","c","add","$booking","state2","googlemaps","mapbox","setMarkers","Nav","Scrollable","AuthService","nav","onPath","onNav","$nav","setItems","scrollable","environmentProvider","http","interceptors","withCredentials","language","code","culture","iso","location","hash","html5","plugins","facebook","appId","fields","version","google","apiKey","clientId","styles","center","lat","lng","zoom","style","paths"],"mappings":"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","file":"app.min.js","sourcesContent":["/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app', ['ngSanitize', 'artisan', 'jsonFormatter']);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.service('Api', ['Http', 'Bearer', function(Http, Bearer) {\n\n\t\tvar api = {\n\t\t\tstore: {\n\t\t\t\tgetById: function(storeId) {\n\t\t\t\t\treturn Http.get('/store/store.json');\n\t\t\t\t},\n\t\t\t},\n\t\t\treserve: {\n\t\t\t\tdata: function(storeId) {\n\t\t\t\t\treturn Http.get('/reserve/data.json');\n\t\t\t\t},\n\t\t\t\tdays: function(storeId, from, to) {\n\t\t\t\t\treturn Http.get('/reserve/days.json', { from: from, to: to });\n\t\t\t\t}\n\t\t\t},\n\t\t\t/*\n\t\t\tauth: {\n\t\t\t    authorized: function() {\n\t\t\t        return Http.get('/auth/authorized');\n\t\t\t    },\n\t\t\t    token: function (model, remember) {\n\t\t\t        return Http.post('/auth/token', model).then(function (data) {\n\t\t\t            Bearer.set(data.accessToken, true);\n\t\t\t        });\n\t\t\t    },\n\t\t\t},\n\t\t\t*/\n\t\t\tnavs: {\n\t\t\t\tmain: function() {\n\t\t\t\t\treturn Http.get('/navs/main.json');\n\t\t\t\t},\n\t\t\t},\n\t\t\tdocs: {\n\t\t\t\tid: function(id) {\n\t\t\t\t\treturn Http.get('/docs/' + id + '.json');\n\t\t\t\t},\n\t\t\t\tpath: function(path) {\n\t\t\t\t\tpath = path.split('/').join('-');\n\t\t\t\t\treturn Http.get('/docs/' + path + '.json');\n\t\t\t\t},\n\t\t\t},\n\t\t\tmaps: {\n\t\t\t\tmarkers: function() {\n\t\t\t\t\treturn Http.get('/maps/markers.json');\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tObject.assign(this, api);\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.config(['$locationProvider', '$routeProvider', '$modalProvider', function($locationProvider, $routeProvider, $modalProvider) {\n\t\t// HTML5 MODE url writing method (false: #/anchor/use, true: /html5/url/use)\n\t\t// $locationProvider.html5Mode(false);\n\t\t//$locationProvider.hashPrefix(''); /* Back to default: fix ancore sulla stessa pagina https://www.eatalyworld.it/it/chi-siamo/chi-siamo */\n\n\t\t$routeProvider.when('/reserve', {\n\t\t\ttemplateUrl: function() {\n\t\t\t\treturn 'views/reserve.html';\n\t\t\t},\n\t\t\tcontroller: 'ReserveController',\n\t\t\tresolve: {\n\t\t\t\tstore: function() { return null; },\n\t\t\t},\n\n\t\t}).when('/reserve/:storeId', {\n\t\t\ttemplateUrl: function() {\n\t\t\t\treturn 'views/reserve/reserve.html';\n\t\t\t},\n\t\t\tcontroller: 'ReserveController',\n\t\t\tresolve: {\n\t\t\t\tstore: ['$route', 'Api', function($route, Api) {\n\t\t\t\t\treturn Api.store.getById($route.current.params.storeId);\n\t\t\t\t}],\n\t\t\t},\n\n\t\t}).when('/reserve/:storeId/planner', {\n\t\t\ttemplateUrl: function() {\n\t\t\t\treturn 'views/reserve/planner.html';\n\t\t\t},\n\t\t\tcontroller: 'PlannerController',\n\t\t\tresolve: {\n\t\t\t\tstore: ['$route', 'Api', function($route, Api) {\n\t\t\t\t\treturn Api.store.getById($route.current.params.storeId);\n\t\t\t\t}],\n\t\t\t\tbooking: ['BookingService', function(BookingService) {\n\t\t\t\t\treturn BookingService.currentOrGoTo('/');\n\t\t\t\t}]\n\t\t\t},\n\n\t\t}).when('/reserve/:storeId/confirm', {\n\t\t\ttemplateUrl: function() {\n\t\t\t\treturn 'views/reserve/confirm.html';\n\t\t\t},\n\t\t\tcontroller: 'ConfirmController',\n\t\t\tresolve: {\n\t\t\t\tstore: ['$route', 'Api', function($route, Api) {\n\t\t\t\t\treturn Api.store.getById($route.current.params.storeId);\n\t\t\t\t}],\n\t\t\t\tbooking: ['BookingService', function(BookingService) {\n\t\t\t\t\treturn BookingService.currentOrGoTo('/');\n\t\t\t\t}]\n\t\t\t},\n\n\t\t}).when('/reserve/:storeId/confirmed', {\n\t\t\ttemplateUrl: function() {\n\t\t\t\treturn 'views/reserve/confirmed.html';\n\t\t\t},\n\t\t\tcontroller: 'ConfirmedController',\n\t\t\tresolve: {\n\t\t\t\tstore: ['$route', 'Api', function($route, Api) {\n\t\t\t\t\treturn Api.store.getById($route.current.params.storeId);\n\t\t\t\t}],\n\t\t\t\tbooking: ['BookingService', function(BookingService) {\n\t\t\t\t\treturn BookingService.currentOrGoTo('/');\n\t\t\t\t}]\n\t\t\t},\n\n\t\t}).when('/contact-us', {\n\t\t\ttemplateUrl: function() {\n\t\t\t\treturn 'views/contact-us.html';\n\t\t\t},\n\t\t\tcontroller: 'ContactUsCtrl',\n\t\t\t// resolve: {\n\t\t\t//    user: ['Users', function(Users) {\n\t\t\t//        return Users.isAuthorizedOrGoTo('/home');\n\t\t\t//    }]\n\t\t\t// },\n\n\t\t});\n\n\t\t$routeProvider.otherwise('/reserve/1');\n\n\t\t$modalProvider.when('categoriesModal', {\n\t\t\ttitle: 'Categories modal',\n\t\t\ttemplateUrl: 'views/reserve/modals/categories.html',\n\t\t\tcontroller: 'CategoriesModal',\n\t\t\tcustomClass: '',\n\n\t\t}).when('productsModal', {\n\t\t\ttitle: 'Products modal',\n\t\t\ttemplateUrl: 'views/reserve/modals/products.html',\n\t\t\tcontroller: 'ProductsModal',\n\t\t\tcustomClass: '',\n\n\t\t}).when('timesModal', {\n\t\t\ttitle: 'Times modal',\n\t\t\ttemplateUrl: 'views/reserve/modals/times.html',\n\t\t\tcontroller: 'TimesModal',\n\t\t\tcustomClass: '',\n\n\t\t}).when('editModal', {\n\t\t\ttitle: 'Edit modal',\n\t\t\ttemplateUrl: 'views/reserve/modals/edit.html',\n\t\t\tcontroller: 'EditModal',\n\t\t\tcustomClass: '',\n\n\t\t}).when('cancelModal', {\n\t\t\ttitle: 'Cancel modal',\n\t\t\ttemplateUrl: 'views/reserve/modals/cancel.html',\n\t\t\tcontroller: 'CancelModal',\n\t\t\tcustomClass: '',\n\n\t\t});\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\t// app.run(['$rootScope', 'Router', 'Trust', 'Bearer', 'FacebookService', 'GoogleService', function($rootScope, Router, Trust, Bearer, FacebookService, GoogleService) {\n\tapp.run(['$rootScope', '$modal', 'Router', 'Trust', 'Bearer', function($rootScope, $modal, Router, Trust, Bearer) {\n\n\t\t$rootScope.modals = $modal.modals;\n\t\t$rootScope.addModal = $modal.addModal;\n\n\t\t$rootScope.router = Router;\n\t\t$rootScope.trust = Trust;\n\n\t\t$rootScope.accessToken = Bearer.get();\n\t\tconsole.log('app.run accessToken', $rootScope.accessToken);\n\n\t\t/*\n\t\tFacebookService.require();\n\t\tGoogleService.require();\n\t\t*/\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tvar DefaultBookingService = {\n\t\tstore: null,\n\t\tcategories: [],\n\t\tproducts: [],\n\t\tdaytimes: [],\n\t\tmodel: {\n\t\t\tstore: null,\n\t\t\tcategory: null,\n\t\t\tproducts: null,\n\t\t\tdate: null,\n\t\t\tdaytime: null,\n\t\t\ttime: null,\n\t\t},\n\t};\n\n\tapp.factory('BookingService', ['$promise', '$location', 'DateTime', 'Api', 'LocalStorage', 'environment', function($promise, $location, DateTime, Api, storage, environment) {\n\n\t\tfunction BookingService(options) {\n\t\t\tObject.assign(this, DefaultBookingService);\n\t\t\tif (options) {\n\t\t\t\tObject.assign(this, options);\n\t\t\t\tthis.model.store = options.store;\n\t\t\t\tthis.model.category = options.categories[0];\n\t\t\t\tthis.model.category.active = true;\n\t\t\t\tthis.emptyDaytimes = this.getEmptyDaytimes();\n\t\t\t}\n\t\t}\n\n\t\tvar statics = {\n\t\t\tnew: newBooking,\n\t\t\tcurrent: getCurrent,\n\t\t\tcurrentOrGoTo: currentOrGoTo,\n\t\t\tupdate: update,\n\t\t};\n\n\t\tvar publics = {\n\t\t\tgetProductsByCategory: getProductsByCategory,\n\t\t\tgetTimesByDaytime: getTimesByDaytime,\n\t\t\tgetDaysByRange: getDaysByRange,\n\t\t\tgetDaysPoolByRange: getDaysPoolByRange,\n\t\t\tgetEmptyDaytimes: getEmptyDaytimes,\n\t\t\tgetProductNames: getProductNames,\n\t\t};\n\n\t\tObject.assign(BookingService, statics);\n\t\tObject.assign(BookingService.prototype, publics);\n\n\t\treturn BookingService;\n\n\t\t// static methods\n\n\t\tfunction newBooking() {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tApi.reserve.data().then(function(data) {\n\t\t\t\t\tvar booking = new BookingService(data);\n\t\t\t\t\tBookingService.booking = booking;\n\t\t\t\t\tpromise.resolve(booking);\n\n\t\t\t\t}, function(error) {\n\t\t\t\t\tpromise.reject(error);\n\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tfunction getCurrent() {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tif (BookingService.booking) {\n\t\t\t\t\tpromise.resolve(BookingService.booking);\n\n\t\t\t\t} else if (storage.exist('reserve')) {\n\t\t\t\t\tvar model = storage.get('reserve');\n\t\t\t\t\tApi.reserve.data().then(function(data) {\n\t\t\t\t\t\tvar booking = new BookingService(data);\n\t\t\t\t\t\tbooking.model = model;\n\t\t\t\t\t\tconsole.log('getting', model);\n\t\t\t\t\t\tBookingService.booking = booking;\n\t\t\t\t\t\tpromise.resolve(booking);\n\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\tpromise.reject(error);\n\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\t\t\t\t\tpromise.resolve(null);\n\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction currentOrGoTo(path) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tBookingService.current().then(function(booking) {\n\t\t\t\t\tif (booking) {\n\t\t\t\t\t\tpromise.resolve(booking);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$location.$$lastRequestedPath = $location.path(); // $route.current.$$route.originalPath;\n\t\t\t\t\t\t$location.path(path);\n\t\t\t\t\t}\n\t\t\t\t}, function(error) {\n\t\t\t\t\tpromise.reject(error);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tfunction update(model) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tif (model) {\n\t\t\t\t\tconsole.log('setting', model);\n\t\t\t\t\tstorage.set('reserve', model);\n\t\t\t\t\tpromise.resolve(model);\n\t\t\t\t} else {\n\t\t\t\t\tpromise.reject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// prototype methods\n\n\t\tfunction getProductsByCategory(category) {\n\t\t\tvar service = this;\n\t\t\treturn this.products.filter(function(x) {\n\t\t\t\treturn x.category === category.id;\n\t\t\t}).sort(function(a, b) {\n\t\t\t\tvar astr = a.name.toUpperCase();\n\t\t\t\tvar bstr = b.name.toUpperCase();\n\t\t\t\treturn (astr < bstr) ? -1 : (astr > bstr) ? 1 : 0;\n\t\t\t});\n\t\t}\n\n\t\tfunction getTimesByDaytime(daytime) {\n\t\t\tvar service = this;\n\t\t\tservice.model.daytime = daytime;\n\t\t\treturn this.times.filter(function(x) {\n\t\t\t\treturn x.daytime === daytime.id;\n\t\t\t}).map(function(x, i) {\n\t\t\t\tvar time = Object.assign({}, x);\n\t\t\t\ttime.active = i === 0;\n\t\t\t\treturn time;\n\t\t\t});\n\t\t}\n\n\t\tfunction getDaysByRange(from, to) {\n\t\t\tvar service = this;\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tApi.reserve.days(service.model.store.id, from, to).then(function(days) {\n\t\t\t\t\tpromise.resolve(days);\n\n\t\t\t\t}, function(error) {\n\t\t\t\t\tpromise.reject(error);\n\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tfunction getDaysPoolByRange(from, to) {\n\t\t\tvar service = this;\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tservice.getDaysByRange(service.model.store.id, from, to).then(function(days) {\n\t\t\t\t\t// !!!\n\t\t\t\t\tdays.forEach(function(day, i) {\n\t\t\t\t\t\tvar date = new Date(from);\n\t\t\t\t\t\tdate.setDate(date.getDate() + i);\n\t\t\t\t\t\tday.date = date;\n\t\t\t\t\t});\n\t\t\t\t\t// !!!\n\t\t\t\t\tvar pool = {};\n\t\t\t\t\tdays.forEach(function(day) {\n\t\t\t\t\t\tday.date = new Date(day.date);\n\t\t\t\t\t\tvar key = DateTime.dateToKey(day.date);\n\t\t\t\t\t\tday.daytimes = {};\n\t\t\t\t\t\tservice.daytimes.forEach(function(daytime) {\n\t\t\t\t\t\t\tday.daytimes[daytime.id] = {\n\t\t\t\t\t\t\t\ttimes: day.times.filter(function(time) {\n\t\t\t\t\t\t\t\t\treturn time.daytime === daytime.id;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tpool[key] = day;\n\t\t\t\t\t});\n\t\t\t\t\tpromise.resolve(pool);\n\n\t\t\t\t}, function(error) {\n\t\t\t\t\tpromise.reject(error);\n\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tfunction getEmptyDaytimes() {\n\t\t\tvar service = this;\n\t\t\tvar emptyDaytimes = {};\n\t\t\tservice.daytimes.forEach(function(daytime) {\n\t\t\t\temptyDaytimes[daytime.id] = {\n\t\t\t\t\ttimes: []\n\t\t\t\t};\n\t\t\t});\n\t\t\treturn emptyDaytimes;\n\t\t}\n\n\t\tfunction getProductNames() {\n\t\t\tvar service = this;\n\t\t\treturn service.model.products ? service.model.products.map(function(x) {\n\t\t\t\treturn x.name;\n\t\t\t}).join(', ') : null;\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('CancelModal', ['$scope', 'State', function($scope, State) {\n\n\t\tvar state = new State();\n\n\t\tvar modal = $scope.modal;\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\tonSubmit: onSubmit,\n\t\t\tonCancel: onCancel,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onSubmit() {\n\t\t\tif (state.busy()) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tstate.success();\n\t\t\t\t\tmodal.resolve();\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}\n\n\t\tfunction onCancel() {\n\t\t\tmodal.reject();\n\t\t}\n\n\t}]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('CategoriesModal', ['$scope', 'State', 'View', 'Range', function($scope, State, View, Range) {\n\n\t\tvar state = new State();\n\n\t\tvar modal = $scope.modal;\n\n\t\tvar items = $scope.params ? $scope.params : [];\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\titems: items,\n\t\t\tonSelect: onSelect,\n\t\t\tonSubmit: onSubmit,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onSelect(item) {\n\t\t\titems.forEach(function(x) {\n\t\t\t\tx.active = false;\n\t\t\t});\n\t\t\titem.active = true;\n\t\t}\n\n\t\tfunction onSubmit() {\n\t\t\tconsole.log('CategoriesModal.onSubmit');\n\t\t\t/*\n\t\t\tif (state.busy()) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tstate.success();\n\t\t\t\t\tmodal.resolve(items);\n\t\t\t\t}, 2000);\n\t\t\t}\n\t\t\t*/\n\t\t\tmodal.resolve(items.find(function(x) {\n\t\t\t\treturn x.active;\n\t\t\t}));\n\t\t}\n\n\t}]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('ConfirmController', ['$scope', '$location', 'State', 'BookingService', 'View', 'Range', 'store', 'booking', function($scope, $location, State, BookingService, View, Range, store, booking) {\n\n\t\tvar state = new State();\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\tstore: store,\n\t\t\tbooking: booking,\n\t\t\tonSelectCategory: onSelectCategory,\n\t\t\tonSelectProduct: onSelectProduct,\n\t\t\tonSubmit: onSubmit,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onSelectCategory() {\n\t\t\tconsole.log('ReserveController.onSelectCategory');\n\t\t\t$scope.$root.addModal('categoriesModal', booking.categories).then(function resolve(data) {\n\t\t\t\tconsole.log('categoriesModal.resolve', data);\n\t\t\t\tbooking.model.category = data;\n\t\t\t\tbooking.model.products = null;\n\n\t\t\t}, function reject(data) {\n\t\t\t\tconsole.log('categoriesModal.reject', data);\n\n\t\t\t});\n\t\t}\n\n\t\tfunction onSelectProduct() {\n\t\t\tconsole.log('ReserveController.onSelectProduct');\n\t\t\tvar products = booking.getProductsByCategory(booking.model.category);\n\t\t\t$scope.$root.addModal('productsModal', products).then(function resolve(data) {\n\t\t\t\tconsole.log('productsModal.resolve', data);\n\t\t\t\tbooking.model.products = data;\n\n\t\t\t}, function reject(data) {\n\t\t\t\tconsole.log('productsModal.reject', data);\n\n\t\t\t});\n\t\t}\n\n\t\tfunction onBack() {\n\t\t\t$location.path('/reserve/' + store.id + '/planner');\n\t\t}\n\n\t\tfunction onSubmit() {\n\t\t\tconsole.log('ConfirmController.onSubmit', booking.model.user.name);\n\t\t\tif (state.busy()) {\n\t\t\t\tBookingService.update(booking.model).then(function(model) {\n\t\t\t\t\t$location.path('/reserve/' + store.id + '/confirmed');\n\t\t\t\t\tstate.success();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('ConfirmedController', ['$scope', '$location', 'State', 'BookingService', 'View', 'Range', 'store', 'booking', function($scope, $location, State, BookingService, View, Range, store, booking) {\n\n\t\tvar state = new State();\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\tstore: store,\n\t\t\tbooking: booking,\n\t\t\tonCancelReservation: onCancelReservation,\n\t\t\tonEditUserData: onEditUserData,\n\t\t\tonBack: onBack,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onCancelReservation() {\n\t\t\tconsole.log('ConfirmedController.onCancelReservation');\n\t\t\t$scope.$root.addModal('cancelModal').then(function resolve() {\n\t\t\t\t$location.path('/reserve/' + store.id + '/canceled');\n\n\t\t\t}, function reject(data) {\n\t\t\t\tconsole.log('timesModal.reject', data);\n\n\t\t\t});\n\t\t}\n\n\t\tfunction onEditUserData() {\n\t\t\tconsole.log('ConfirmedController.onEditUserData');\n\t\t\t$scope.$root.addModal('editModal', booking.model).then(function resolve(model) {\n\t\t\t\tBookingService.update(model).then(function(model) {\n\t\t\t\t\tbooking.model = model;\n\t\t\t\t});\n\n\t\t\t}, function reject(data) {\n\t\t\t\tconsole.log('timesModal.reject', data);\n\n\t\t\t});\n\t\t}\n\n\t\tfunction onBack() {\n\t\t\t$location.path('/reserve/' + store.id + '/confirm');\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('EditModal', ['$scope', 'State', function($scope, State) {\n\n\t\tvar state = new State();\n\n\t\tvar modal = $scope.modal;\n\n\t\tvar model = $scope.params ? $scope.params : {};\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\tmodel: model,\n\t\t\tonSubmit: onSubmit,\n\t\t\tonCancel: onCancel,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onSubmit() {\n\t\t\tconsole.log('EditModal.onSubmit');\n\t\t\tif (state.busy()) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tstate.success();\n\t\t\t\t\tmodal.resolve(model);\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}\n\n\t\tfunction onCancel() {\n\t\t\tconsole.log('EditModal.onCancel');\n\t\t\tmodal.reject();\n\t\t}\n\n\t}]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('PlannerController', ['$scope', '$location', 'State', 'BookingService', 'View', 'Range', 'store', 'booking', function($scope, $location, State, BookingService, View, Range, store, booking) {\n\n\t\tvar state = new State();\n\n\t\tvar plannerOptions = {\n\t\t\tonWeekDidChange: function(date, week, view) {\n\t\t\t\t// console.log('onWeekDidChange.date', date, week, view);\n\t\t\t\tbooking.model.date = null;\n\t\t\t\tbooking.model.daytime = null;\n\t\t\t\tbooking.model.time = null;\n\t\t\t\tbooking.getDaysPoolByRange(week.from, week.to).then(function(days) {\n\t\t\t\t\t// console.log(days);\n\t\t\t\t\tview.days.each(function(day) {\n\t\t\t\t\t\t// console.log(day.key);\n\t\t\t\t\t\tvar poolDay = days[day.key];\n\t\t\t\t\t\tif (poolDay) {\n\t\t\t\t\t\t\tday.times = poolDay.times;\n\t\t\t\t\t\t\tday.daytimes = poolDay.daytimes;\n\t\t\t\t\t\t\tday.closingDay = poolDay.closingDay;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tday.times = [];\n\t\t\t\t\t\t\tday.daytimes = booking.emptyDaytimes;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tonDayDidSelect: function(day, daytime, month, view) {\n\t\t\t\t$scope.$root.addModal('timesModal', {\n\t\t\t\t\tday: day,\n\t\t\t\t\tdaytime: daytime,\n\t\t\t\t\ttimes: daytime.times,\n\n\t\t\t\t}).then(function resolve(time) {\n\t\t\t\t\tview.days.each(function(day) {\n\t\t\t\t\t\tObject.keys(day.daytimes).forEach(function(key) {\n\t\t\t\t\t\t\tday.daytimes[key].active = false;\n\t\t\t\t\t\t\tday.daytimes[key].times.forEach(function(time) {\n\t\t\t\t\t\t\t\ttime.active = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\ttime.active = true;\n\t\t\t\t\tdaytime.active = true;\n\t\t\t\t\tdaytime.time = time;\n\t\t\t\t\tbooking.model.date = day.date;\n\t\t\t\t\tbooking.model.daytime = daytime;\n\t\t\t\t\tbooking.model.time = time;\n\n\t\t\t\t}, function reject(data) {\n\t\t\t\t\tconsole.log('timesModal.reject', data);\n\n\t\t\t\t});\n\t\t\t},\n\t\t\tonWeekDidSelect: function(week, month, view) {\n\t\t\t\tconsole.log('onWeekDidSelect.week', week);\n\t\t\t},\n\t\t};\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\tstore: store,\n\t\t\tbooking: booking,\n\t\t\tplannerOptions: plannerOptions,\n\t\t\tonBack: onBack,\n\t\t\tonSubmit: onSubmit,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onBack() {\n\t\t\t$location.path('/reserve/' + store.id);\n\t\t}\n\n\t\tfunction onSubmit() {\n\t\t\tconsole.log('PlannerController.onSubmit', booking.model.time.name);\n\t\t\tif (state.busy()) {\n\t\t\t\tBookingService.update(booking.model).then(function(model) {\n\t\t\t\t\t$location.path('/reserve/' + store.id + '/confirm');\n\t\t\t\t\tstate.success();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n    }]);\n\n}());\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.directive('planner', ['$templateCache', '$parse', '$q', '$timeout', '$filter', 'Hash', 'DateTime', 'Range', 'PlannerFactory', 'State', 'Api', function($templateCache, $parse, $q, $timeout, $filter, Hash, DateTime, Range, PlannerFactory, State, Api) {\n\n\t\treturn {\n\t\t\tpriority: 1002,\n\t\t\trestrict: 'A',\n\t\t\ttemplateUrl: TemplateUrl,\n\t\t\tscope: {\n\t\t\t\toptions: '=planner',\n\t\t\t\tdaytimes: '=daytimes',\n\t\t\t},\n\t\t\tlink: Link,\n\t\t};\n\n\t\tfunction TemplateUrl(element, attributes) {\n\t\t\tvar url = attributes.template;\n\t\t\tif (!url) {\n\t\t\t\turl = 'partials/planner';\n\t\t\t\tif (!$templateCache.get(url)) {\n\t\t\t\t\t$templateCache.put(url, '<div><json-formatter json=\"options\"></json-formatter></div>');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\n\t\tfunction Link(scope, element, attributes, model, transclude) {\n\n\t\t\tvar planner = new PlannerFactory();\n\n\t\t\tvar options = scope.options || {\n\t\t\t\tonWeekDidChange: function() {},\n\t\t\t\tonWeekDidSelect: function() {},\n\t\t\t\tonDayDidSelect: function() {},\n\t\t\t};\n\n\t\t\tvar month = Range.Month();\n\t\t\tvar week = Range.Week();\n\t\t\tvar day = Range.Day();\n\n\t\t\tvar sources = {\n\t\t\t\tmonth: month,\n\t\t\t\tweek: week,\n\t\t\t\tday: day,\n\t\t\t\tview: null,\n\t\t\t};\n\n\t\t\tvar publics = {\n\t\t\t\tsources: sources,\n\t\t\t\tdoNavWeek: doNavWeek,\n\t\t\t\tonWeekSelect: onWeekSelect,\n\t\t\t\tonDaySelect: onDaySelect,\n\t\t\t\tgetDayClasses: getDayClasses,\n\t\t\t\thasWeeksBefore: hasWeeksBefore,\n\t\t\t};\n\n\t\t\tangular.extend(scope, publics);\n\n\t\t\t// console.log('scope', scope);\n\n\t\t\tsetWeek(); // Init\n\n\t\t\tfunction setWeek(date) {\n\t\t\t\tif (!date || week.isOutside(date)) {\n\t\t\t\t\tif (date) {\n\t\t\t\t\t\tweek.setDate(date);\n\t\t\t\t\t}\n\t\t\t\t\tonWeekChange(date);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction onWeekChange(date) {\n\t\t\t\tvar view = planner.getWeekByDate(week.getDate());\n\t\t\t\tview.days.each(function(day) {\n\t\t\t\t\tvar d = day.date.getDay();\n\t\t\t\t\tday.dirty = true;\n\t\t\t\t\tday.selected = sources.day.isCurrent(day.date);\n\t\t\t\t\tday.past = day.key < Range.today.key;\n\t\t\t\t\tday.weekend = d === 0 || d === 6;\n\t\t\t\t\tday.working = !day.weekend;\n\t\t\t\t\t// reset\n\t\t\t\t\tday.holiday = false;\n\t\t\t\t\tday.vacation = false;\n\t\t\t\t\tday.wasVacation = false;\n\t\t\t\t\tday.wasWorkable = false;\n\t\t\t\t\tday.workable = false;\n\t\t\t\t});\n\t\t\t\tsources.view = view;\n\t\t\t\toptions.onWeekDidChange(date, week, view);\n\t\t\t}\n\n\t\t\tfunction onWeekSelect(week) {\n\t\t\t\t// console.log('onWeekSelect', week);\n\t\t\t\tif (!week) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (options.onWeekDidSelect(week, month, sources.view) === true) {\n\t\t\t\t\t// sources.week.setDate(week.date);\n\t\t\t\t\t// updateSelections();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction onDaySelect(day, daytime) {\n\t\t\t\t// console.log('onDaySelect', day);\n\t\t\t\tif (!day) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (options.onDayDidSelect(day, daytime, month, sources.view) === true) {\n\t\t\t\t\tsources.day.setDate(day.date);\n\t\t\t\t\tupdateSelections();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction updateSelections() {\n\t\t\t\tvar view = sources.view;\n\t\t\t\tview.days.each(function(day) {\n\t\t\t\t\tday.selected = sources.day.isCurrent(day.date);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction doNavWeek(dir) {\n\t\t\t\t// console.log('doNavWeek', dir);\n\t\t\t\tsetWeek(week.getDate(dir));\n\t\t\t}\n\n\t\t\tfunction getDayClasses(day) {\n\t\t\t\tvar classes = {\n\t\t\t\t\t'day': day,\n\t\t\t\t};\n\t\t\t\tif (day) {\n\t\t\t\t\tangular.extend(classes, {\n\t\t\t\t\t\t'today': day.$today,\n\t\t\t\t\t\t'selected': day.selected,\n\t\t\t\t\t\t'workable': day.workable,\n\t\t\t\t\t\t'holiday': day.holiday,\n\t\t\t\t\t\t'vacation': day.vacation,\n\t\t\t\t\t\t'working': day.working,\n\t\t\t\t\t\t'available': day.available,\n\t\t\t\t\t\t'full': day.full,\n\t\t\t\t\t\t'status-green': day.green,\n\t\t\t\t\t\t'status-orange': day.orange,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn classes;\n\t\t\t}\n\n\t\t\tfunction hasWeeksBefore() {\n\t\t\t\treturn !week.isCurrent(day.date);\n\t\t\t}\n\n\t\t}\n\n    }]);\n\n\tapp.filter('capitalize', function() {\n\t\treturn function(input) {\n\t\t\treturn (!!input) ? input.charAt(0).toUpperCase() + input.substr(1).toLowerCase() : '';\n\t\t};\n\t});\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.factory('PlannerFactory', ['$filter', 'DateTime', 'Hash', function($filter, DateTime, Hash) {\n\n\t\tfunction Calendar() {\n\t\t\tthis.days = new Hash('key');\n\t\t\tthis.weeks = new Hash('wKey');\n\t\t}\n\n\t\tvar statics = {\n\t\t\tclearMonth: clearMonth,\n\t\t\tgetDate: getDate,\n\t\t\tgetDay: getDay,\n\t\t\tgetKey: getKey,\n\t\t};\n\n\t\tvar publics = {\n\t\t\tgetWeeks: getWeeks,\n\t\t\tgetWeek: getWeek,\n\t\t\tgetWeekByDate: getWeekByDate,\n\t\t};\n\n\t\tangular.extend(Calendar, statics);\n\t\tangular.extend(Calendar.prototype, publics);\n\n\t\treturn Calendar;\n\n\t\t// statics\n\n\t\tfunction clearMonth(month) {\n\t\t\tmonth.days.each(function(day) {\n\t\t\t\tif (day) {\n\t\t\t\t\tday.hours = 0;\n\t\t\t\t\tday.tasks = new Hash('id');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction getDate(day) {\n\t\t\tif (typeof day.date.getMonth === 'function') {\n\t\t\t\treturn day.date;\n\t\t\t} else {\n\t\t\t\treturn new Date(day.date);\n\t\t\t}\n\t\t}\n\n\t\tfunction getDay(days) {\n\t\t\tvar date = new Date(DateTime.today.date);\n\t\t\tdate.setDate(date.getDate() + days);\n\t\t\treturn date;\n\t\t}\n\n\t\tfunction getKey(date) {\n\t\t\treturn DateTime.dateToKey(date);\n\t\t}\n\n\t\t// publics\n\n\t\tfunction getWeeks(num) {\n\t\t\tvar calendar = this;\n\t\t\tcalendar.days.removeAll();\n\t\t\tcalendar.weeks.removeAll();\n\t\t\tcalendar.months.removeAll();\n\t\t\tvar i = 0;\n\t\t\twhile (i < num) {\n\t\t\t\tvar date = new Date();\n\t\t\t\tdate.setFullYear(DateTime.today.date.getFullYear());\n\t\t\t\tdate.setMonth(DateTime.today.date.getMonth() + i);\n\t\t\t\tdate.setDate(1);\n\t\t\t\tdate.setHours(0);\n\t\t\t\tdate.setMinutes(0);\n\t\t\t\tdate.setSeconds(0);\n\t\t\t\tvar week = calendar.getWeekByDate(date);\n\t\t\t\t// console.log('getWeeks', week);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\t// console.log('getWeeks', calendar.weeks);\n\t\t\treturn calendar.weeks;\n\t\t}\n\n\t\tfunction getWeek(day) {\n\t\t\tvar calendar = this;\n\t\t\tvar date = getDate(day);\n\t\t\tvar week = calendar.getWeekByDate(date);\n\t\t\treturn week;\n\t\t}\n\n\t\tfunction getWeekByDate(date) {\n\t\t\tdate = date || new Date();\n\t\t\tvar calendar = this;\n\t\t\tvar yyyy = date.getFullYear();\n\t\t\tvar MM = date.getMonth();\n\t\t\tvar day = date.getDay();\n\t\t\tvar diff = date.getDate() - day + (day === 0 ? -6 : 1);\n\t\t\tvar weekDate = new Date(date.setDate(diff));\n\t\t\tvar isoWeek = $filter('isoWeek')(date, 1);\n\t\t\tvar dKey = DateTime.dateToKey(weekDate);\n\t\t\tvar wKey = yyyy * 60 + isoWeek;\n\t\t\tvar mKey = yyyy * 12 + MM;\n\t\t\tvar week = calendar.weeks.get(wKey);\n\t\t\tif (!week) {\n\t\t\t\tvar days = new Hash('key');\n\t\t\t\tnew Array(7).fill().map(function(o, i) {\n\t\t\t\t\tvar dayDate = new Date(weekDate);\n\t\t\t\t\tdayDate.setDate(weekDate.getDate() + i);\n\t\t\t\t\tvar key = DateTime.dateToKey(dayDate);\n\t\t\t\t\tvar item = {\n\t\t\t\t\t\t$today: key === DateTime.today.key,\n\t\t\t\t\t\tc: i,\n\t\t\t\t\t\td: dayDate.getDate(),\n\t\t\t\t\t\tdate: dayDate,\n\t\t\t\t\t\tkey: key,\n\t\t\t\t\t};\n\t\t\t\t\tcalendar.days.add(item);\n\t\t\t\t\tdays.add(item);\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tweek = {\n\t\t\t\t\tisoWeek: isoWeek,\n\t\t\t\t\tkey: dKey,\n\t\t\t\t\twKey: wKey,\n\t\t\t\t\tmKey: mKey,\n\t\t\t\t\tdate: weekDate,\n\t\t\t\t\tdays: days,\n\t\t\t\t};\n\t\t\t\tweek = calendar.weeks.add(week);\n\t\t\t}\n\t\t\treturn week;\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('ProductsModal', ['$scope', 'State', function($scope, State) {\n\n\t\tvar state = new State();\n\n\t\tvar modal = $scope.modal;\n\n\t\tvar items = $scope.params ? $scope.params : [];\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\titems: items,\n\t\t\tonSubmit: onSubmit,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onSubmit() {\n\t\t\tconsole.log('ProductsModal.onSubmit');\n\t\t\t/*\n\t\t\tif (state.busy()) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tstate.success();\n\t\t\t\t\tmodal.resolve(items);\n\t\t\t\t}, 2000);\n\t\t\t}\n\t\t\t*/\n\t\t\tmodal.resolve(items.filter(function(x) {\n\t\t\t\treturn x.active;\n\t\t\t}));\n\t\t}\n\n\t}]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('ReserveController', ['$scope', '$location', 'State', 'BookingService', 'View', 'Range', 'store', function($scope, $location, State, BookingService, View, Range, store) {\n\n\t\tvar state = new State();\n\n\t\tvar booking = null;\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\tstore: store,\n\t\t\tbooking: booking,\n\t\t\tonSelectCategory: onSelectCategory,\n\t\t\tonSelectProduct: onSelectProduct,\n\t\t\tonSubmit: onSubmit,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tBookingService.new().then(function($booking) {\n\t\t\tbooking = $booking;\n\t\t\t$scope.booking = booking;\n\t\t\tstate.ready();\n\n\t\t}, function(error) {\n\t\t\tstate.error(error);\n\n\t\t});\n\n\t\tfunction onSelectCategory() {\n\t\t\tconsole.log('ReserveController.onSelectCategory');\n\t\t\t$scope.$root.addModal('categoriesModal', booking.categories).then(function resolve(data) {\n\t\t\t\tconsole.log('categoriesModal.resolve', data);\n\t\t\t\tbooking.model.category = data;\n\t\t\t\tbooking.model.products = null;\n\n\t\t\t}, function reject(data) {\n\t\t\t\tconsole.log('categoriesModal.reject', data);\n\n\t\t\t});\n\t\t}\n\n\t\tfunction onSelectProduct() {\n\t\t\tconsole.log('ReserveController.onSelectProduct');\n\t\t\tvar products = booking.getProductsByCategory(booking.model.category);\n\t\t\t$scope.$root.addModal('productsModal', products).then(function resolve(data) {\n\t\t\t\tconsole.log('productsModal.resolve', data);\n\t\t\t\tbooking.model.products = data;\n\n\t\t\t}, function reject(data) {\n\t\t\t\tconsole.log('productsModal.reject', data);\n\n\t\t\t});\n\t\t}\n\n\t\tfunction onSubmit() {\n\t\t\tconsole.log('ReserveController.onSubmit', booking.model.products.map(function(x) { return x.name; }).join(', '));\n\t\t\tif (state.busy()) {\n\t\t\t\tBookingService.update(booking.model).then(function(model) {\n\t\t\t\t\t$location.path('/reserve/' + store.id + '/planner');\n\t\t\t\t\tstate.success();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('TimesModal', ['$scope', 'State', function($scope, State) {\n\n\t\tvar state = new State();\n\n\t\tvar modal = $scope.modal;\n\n\t\tvar params = $scope.params ? $scope.params : {};\n\t\tvar items = params.times || [];\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\titems: items,\n\t\t\tonSelect: onSelect,\n\t\t\tonSubmit: onSubmit,\n\t\t};\n\n\t\tObject.assign($scope, publics);\n\n\t\tstate.ready();\n\n\t\tfunction onSelect(item) {\n\t\t\titems.forEach(function(x) {\n\t\t\t\tx.active = false;\n\t\t\t});\n\t\t\titem.active = true;\n\t\t}\n\n\t\tfunction onSubmit() {\n\t\t\tconsole.log('TimeModal.onSubmit');\n\t\t\t/*\n\t\t\tif (state.busy()) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tstate.success();\n\t\t\t\t\tmodal.resolve(items);\n\t\t\t\t}, 2000);\n\t\t\t}\n\t\t\t*/\n\t\t\tmodal.resolve(items.find(function(x) {\n\t\t\t\treturn x.active;\n\t\t\t}));\n\t\t}\n\n\t}]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('ContactUsCtrl', ['$scope', 'State', 'View', 'Api', function($scope, State, View, Api) {\n\n\t\tvar state = new State();\n\t\tvar state2 = new State();\n\t\tvar googlemaps = {};\n\t\tvar mapbox = {};\n\n\t\tvar publics = {\n\t\t\tstate: state,\n\t\t\tstate2: state2,\n\t\t\tgooglemaps: googlemaps,\n\t\t\tmapbox: mapbox,\n\t\t};\n\n\t\tObject.assign($scope, publics); // todo\n\n\t\tView.current().then(function(view) {\n\t\t\t$scope.view = view;\n\t\t\tstate.ready();\n\n\t\t}, function(error) {\n\t\t\tstate.error(error);\n\n\t\t});\n\n\t\tApi.maps.markers().then(function(items) {\n\t\t\tgooglemaps.setMarkers(items);\n\t\t\tmapbox.setMarkers(items);\n\t\t});\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.controller('RootCtrl', ['$scope', '$timeout', '$promise', 'Nav', 'Api', 'Range', 'Scrollable', 'AuthService', function($scope, $timeout, $promise, Nav, Api, Range, Scrollable, AuthService) {\n\n\t\tvar nav = new Nav({\n\t\t\tonPath: onPath,\n\t\t\tonNav: onNav,\n\t\t});\n\n\t\tApi.navs.main().then(function(items) {\n\t\t\tnav.setItems(items);\n\n\t\t}, function(error) {\n\t\t\tconsole.log('RootCtrl.error', error);\n\n\t\t});\n\n\t\tfunction onPath(item) {\n\t\t\tvar path = item.path;\n\t\t\t// console.log('RootCtrl.onPath', item.$nav.level, path);\n\t\t\treturn path;\n\t\t}\n\n\t\tfunction onNav(item) {\n\t\t\t// console.log('RootCtrl.onNav', item.$nav.level, item.$nav.path);\n\t\t\tNav.path(item.$nav.path);\n\t\t\treturn false; // returning false disable default link behaviour;\n\t\t}\n\n\t\tfunction onNavPromise(item) {\n\t\t\t$scope.selected = item;\n\t\t\treturn $promise(function(promise) {\n\t\t\t\t// console.log('RootCtrl.onNavPromise', item.$nav.level, item.$nav.path);\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tif (item.items) {\n\t\t\t\t\t\titem.$nav.addItems({\n\t\t\t\t\t\t\tname: \"Item\",\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tpromise.resolve();\n\t\t\t\t});\n\t\t\t}); // a promise always disable default link behaviour;\n\t\t}\n\n\t\t$scope.nav = nav;\n\n\t\tvar scrollable = new Scrollable();\n\t\t$scope.scrollable = scrollable;\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.config(['environmentProvider', function(environmentProvider) {\n\n\t\tenvironmentProvider.add('environment', {\n\t\t\thttp: {\n\t\t\t\tinterceptors: [], // ['AuthService'],\n\t\t\t\twithCredentials: false,\n\t\t\t},\n\t\t\tlanguage: {\n\t\t\t\tcode: 'it',\n\t\t\t\tculture: 'it_IT',\n\t\t\t\tiso: 'ITA',\n\t\t\t\tname: 'Italiano',\n\t\t\t},\n\t\t\tlocation: {\n\t\t\t\thash: '!',\n\t\t\t\thtml5: false,\n\t\t\t},\n\t\t\tplugins: {\n\t\t\t\tfacebook: {\n\t\t\t\t\tappId: 340008479796111,\n\t\t\t\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\n\t\t\t\t\tscope: 'public_profile, email', // publish_stream\n\t\t\t\t\tversion: 'v2.10',\n\t\t\t\t},\n\t\t\t\tgoogle: {\n\t\t\t\t\tapiKey: 'AIzaSyCn6O-j_8pipy-ErGxg4bM1juGesiyM28U',\n\t\t\t\t\tclientId: '1063539520533-7308vqmt92em6dv1v5q52fq2or36jk95.apps.googleusercontent.com',\n\t\t\t\t},\n\t\t\t\tgooglemaps: {\n\t\t\t\t\tapiKey: 'AIzaSyCn6O-j_8pipy-ErGxg4bM1juGesiyM28U',\n\t\t\t\t\tstyles: '/googlemaps/applemapesque.json',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tcenter: {\n\t\t\t\t\t\t\tlat: 43.9023386, // latitude\n\t\t\t\t\t\t\tlng: 12.8505094, // longitude\n\t\t\t\t\t\t},\n\t\t\t\t\t\tzoom: 4.0,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmapbox: {\n\t\t\t\t\taccessToken: 'pk.eyJ1IjoiYWN0YXJpYW4iLCJhIjoiY2lqNWU3MnBzMDAyZndnbTM1cjMyd2N2MiJ9.CbuEGSvOAfIYggQv854pRQ',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tcenter: [\n                            12.8505094, // longitude\n                            43.9023386, // latitude\n                        ],\n\t\t\t\t\t\tzoom: 4.0,\n\t\t\t\t\t},\n\t\t\t\t\tstyle: 'mapbox://styles/actarian/cja82nadj07sn2rmty6n1n5pk',\n\t\t\t\t\tversion: 'v0.42.0',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.config(['environmentProvider', function(environmentProvider) {\n\n\t\tenvironmentProvider.add('local', {\n\t\t\tpaths: {\n\t\t\t\tapi: 'http://localhost:6001/api',\n\t\t\t\tapp: 'http://localhost:6001',\n\t\t\t},\n\t\t\tplugins: {\n\t\t\t\tfacebook: {\n\t\t\t\t\tappId: 340008479796111,\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.config(['environmentProvider', function(environmentProvider) {\n\n\t\tenvironmentProvider.add('production', {\n\t\t\tpaths: {\n\t\t\t\tapi: 'https://actarian.github.io/scavolini-reserve/api',\n\t\t\t\tapp: 'https://actarian.github.io/scavolini-reserve',\n\t\t\t},\n\t\t\tplugins: {\n\t\t\t\tfacebook: {\n\t\t\t\t\tappId: 156171878319496,\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('app');\n\n\tapp.config(['environmentProvider', function(environmentProvider) {\n\n\t\tenvironmentProvider.add('stage', {\n\t\t\t//\n\t\t});\n\n    }]);\n\n}());\n"]}